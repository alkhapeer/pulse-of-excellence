<!DOCTYPE html>
<html lang="ar">
<head>
  <script src="scripts/auth.js"></script>

<meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ù…Ù‚ÙŠØ§Ø³ Ù†Ø¨Ø¶ Ø§Ù„ØªÙ…ÙŠÙ‘Ø² â€“ Ø§Ù„Ù…Ø­ÙˆØ± Ø§Ù„Ø¹Ø§Ø·ÙÙŠ</title>
  <style>
    /* ===== Ø£Ù†Ù…Ø§Ø· Ø¹Ø§Ù…Ø© ===== */
    body {
      direction: rtl;
      font-family: Arial, sans-serif;
      max-width: 700px;
      margin: auto;
      padding: 20px;
      background: #f9f9fc;
    }
    h1, h2 {
      text-align: center;
      margin: 10px 0;
    }

    /* ===== Ø²Ø± Ø§Ù„Ø¥Ø±Ø´Ø§Ø¯Ø§Øª ===== */
    #openInstr {
      display: block;
      margin: 0 auto 20px;
      padding: 10px 16px;
      background: #4F46E5;
      color: #fff;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }

    /* ===== Ø£Ù†Ù…Ø§Ø· Ø§Ù„Ù€Modal (Ù…Ø­Ø¯Ø«Ø© Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… ID ÙˆÙ„ÙŠØ³ class Ø¹Ø§Ù…Ø©) ===== */
    #instrModal {
      display: none;          /* Ù…Ø®ÙÙŠ Ø§ÙØªØ±Ø§Ø¶ÙŠÙ‹Ø§ */
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(0,0,0,0.5);
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }
    #instrModal .modal-content {
      background: #fff;
      border-radius: 8px;
      padding: 20px;
      max-width: 90%;
      max-height: 80%;
      overflow-y: auto;
      box-shadow: 0 2px 10px rgba(0,0,0,0.3);
      position: relative;
    }
    #instrModal .modal-content h3 {
      margin-top: 0;
    }
    #instrModal .modal-close {
      position: absolute;
      top: 10px; left: 10px;
      background: #ccc;
      border: none;
      padding: 4px 8px;
      cursor: pointer;
      border-radius: 3px;
    }

    /* ===== ØµÙˆØ±Ø© Ø§Ù„Ø³Ø¤Ø§Ù„ ===== */
    #question-img {
      width: 300px;
      height: auto;
      display: block;
      margin: 0 auto 20px;
      border-radius: 8px;
    }

    /* ===== ÙƒØ§Ø±Ø¯ Ø§Ù„Ø³Ø¤Ø§Ù„ ÙˆØ§Ù„Ù†ØªÙŠØ¬Ø© ===== */
    .card, .result-card {
      background: #fff;
      border: 1px solid #ddd;
      padding: 20px;
      border-radius: 8px;
      margin-bottom: 20px;
    }

    /* ===== Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„ÙˆØ¬ÙˆÙ‡ Ø§Ù„ØªØ¹Ø¨ÙŠØ±ÙŠØ© ===== */
    .emoji-options {
      display: flex;
      justify-content: center;
      margin-top: 15px;
    }
    .emoji-btn {
      font-size: 2rem;
      border: 2px solid transparent;
      border-radius: 50%;
      padding: 8px;
      margin: 0 10px;
      cursor: pointer;
      background: none;
      transition: border-color 0.2s;
    }
    .emoji-btn.selected {
      border-color: #4F46E5;
    }

    /* ===== Ø§Ù„Ø£Ø³Ø·ÙˆØ±Ø© ===== */
    .legend {
      display: block;        /* ØªØ£ÙƒØ¯ Ø£Ù†Ù‡Ø§ ØªØ¸Ù‡Ø± ÙÙŠ Ø³Ø·Ø± Ù…Ù†ÙØµÙ„ */
      text-align: center;
      margin-top: 10px;
      font-size: 0.9rem;
      color: #555;
    }

    /* ===== Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªÙ†Ù‚Ù„ ===== */
    .nav {
      display: flex;
      justify-content: space-between;
      margin-top: 20px;
    }
    .prev {
      background: #ccc;
      color: #000;
      padding: 10px 16px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    .next {
      background: #4F46E5;
      color: #fff;
      padding: 10px 16px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }

    /* ===== Ø§Ù„Ù†ØµØ§Ø¦Ø­ ===== */
    .solutions {
      margin-top: 10px;
      padding-left: 20px;
    }
    .solutions li {
      margin-bottom: 5px;
    }
  </style>
</head>
<body>
  <h1>Ù…Ù‚ÙŠØ§Ø³ Ù†Ø¨Ø¶ Ø§Ù„ØªÙ…ÙŠÙ‘Ø²</h1>
  <h2>Ø§Ù„Ù…Ø­ÙˆØ± Ø§Ù„Ø¹Ø§Ø·ÙÙŠ</h2>

  <!-- Ø²Ø± Ø§Ù„Ø¥Ø±Ø´Ø§Ø¯Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø© -->
  <button id="openInstr">Ø§Ù„Ø¥Ø±Ø´Ø§Ø¯Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø©</button>

  <!-- Ù†Ø§ÙØ°Ø© Ø§Ù„Ø¥Ø±Ø´Ø§Ø¯Ø§Øª (Modal) -->
  <div id="instrModal">
    <div class="modal-content">
      <button id="closeInstr" class="modal-close">Ã— Ø¥ØºÙ„Ø§Ù‚</button>
      <h3>Ø§Ù„Ø¥Ø±Ø´Ø§Ø¯Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø© Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…Ù‚ÙŠØ§Ø³</h3>
      <ul>
        <li>Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„ÙˆØ¬Ù‡ Ø§Ù„ØªØ¹Ø¨ÙŠØ±ÙŠ Ø§Ù„Ø£Ù‚Ø±Ø¨ Ù„ÙˆØµÙ Ø´Ø¹ÙˆØ± ÙˆØ³Ù„ÙˆÙƒ Ø·ÙÙ„Ùƒ.</li>
        <li>ØªÙ†Ù‚Ù„ Ø¨ÙŠÙ† Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø£Ø²Ø±Ø§Ø± "Ø§Ù„Ø³Ø§Ø¨Ù‚" Ùˆ"Ø§Ù„ØªØ§Ù„ÙŠ".</li>
        <li>Ø£Ø¬Ø¨ Ø¹Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù†ØªÙŠØ¬Ø© Ø¯Ù‚ÙŠÙ‚Ø©.</li>
        <li>Ø¨Ø¹Ø¯ Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡ØŒ Ø³ÙŠØ¸Ù‡Ø± "Ù†Ù‚Ø§Ø· Ø§Ù„Ù‚ÙˆØ©" Ùˆ"Ø§Ù„ØªÙ‚ÙŠÙŠÙ…" Ùˆ"Ø§Ù„Ù†ØµØ§Ø¦Ø­".</li>
        <li>ÙŠÙÙØ¶Ù„ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± ÙƒÙ„ 3â€“6 Ø£Ø´Ù‡Ø± Ù„Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„ØªØ·ÙˆØ±.</li>
      </ul>
    </div>
  </div>

  <!-- ØµÙˆØ±Ø© Ø§Ù„Ø³Ø¤Ø§Ù„ -->
  <img id="question-img" src="assets/images/emotional/q1.jpg" alt="ØµÙˆØ±Ø© Ø§Ù„Ø³Ø¤Ø§Ù„ 1">

  <div id="quiz-container"></div>
  <div class="nav">
    <button id="prevBtn" class="prev">Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
    <button id="nextBtn" class="next">Ø§Ù„ØªØ§Ù„ÙŠ</button>
  </div>

  <script>
    // ===== Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù€Modal =====
    const instrModal = document.getElementById('instrModal');
    const openInstr  = document.getElementById('openInstr');
    const closeInstr = document.getElementById('closeInstr');
    openInstr.onclick  = () => instrModal.style.display = 'flex';
    closeInstr.onclick = () => instrModal.style.display = 'none';
    instrModal.onclick = e => { if (e.target === instrModal) instrModal.style.display = 'none'; };

    // ===== Ø§Ù„Ø£Ø³Ø¦Ù„Ø© ÙˆØ§Ù„Ø§Ø®ØªØ¨Ø§Ø± =====
    const questions = [
      'Ø£Ø³ØªØ·ÙŠØ¹ ØªÙ‡Ø¯Ø¦Ø© Ù†ÙØ³ÙŠ Ø¹Ù†Ø¯Ù…Ø§ Ø£Ø´Ø¹Ø± Ø¨Ø§Ù„ØªÙˆØªØ±.',
      'Ø£Ø´Ø¹Ø± Ø¨Ø§Ù„Ø­Ø²Ù† Ø¨Ø³Ù‡ÙˆÙ„Ø© Ø¹Ù†Ø¯ Ø³Ù…Ø§Ø¹ Ø£Ø®Ø¨Ø§Ø± Ø³ÙŠØ¦Ø©.',
      'Ø£Ø³ØªÙ…ØªØ¹ Ø¨Ù„Ø­Ø¸Ø§Øª Ø§Ù„Ø³Ø¹Ø§Ø¯Ø© ÙˆØ£Ø¹Ø¨Ø± Ø¹Ù†Ù‡Ø§.',
      'Ø£Ø´Ø¹Ø± Ø¨Ø§Ù„Ù‚Ù„Ù‚ Ù‚Ø¨Ù„ Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†Ø§Øª Ø£Ùˆ Ø§Ù„Ø¹Ø±Ø¶ Ø£Ù…Ø§Ù… Ø§Ù„Ø¢Ø®Ø±ÙŠÙ†.',
      'Ø£ØªÙ…ÙƒÙ† Ù…Ù† Ø§Ù„ØªØ­ÙƒÙ… Ø¨ØºØ¶Ø¨ÙŠ Ø¹Ù†Ø¯ Ø§Ù„Ø´Ø¹ÙˆØ± Ø¨Ø§Ù„Ø¥Ø­Ø¨Ø§Ø·.',
      'Ø£Ø¨ÙƒÙŠ Ø£Ø­ÙŠØ§Ù†Ø§Ù‹ Ø¹Ù†Ø¯Ù…Ø§ Ø£Ø´Ø¹Ø± Ø¨Ø§Ù„Ù†Ø¹Ø§Ø³ Ø£Ùˆ Ø§Ù„ÙˆØ­Ø¯Ø©.',
      'Ø£Ø´Ø¹Ø± Ø¨Ø§Ù„Ø®ÙˆÙ Ø¹Ù†Ø¯ Ø¸Ù„Ø§Ù… Ø§Ù„Ù„ÙŠÙ„ Ø£Ùˆ Ø§Ù„Ø£ØµÙˆØ§Øª Ø§Ù„Ø¹Ø§Ù„ÙŠØ©.',
      'Ø£Ø¹Ø¨Ù‘Ø± Ø¹Ù† Ø§Ù…ØªÙ†Ø§Ù†ÙŠ Ù„Ù„Ø£Ø´ÙŠØ§Ø¡ Ø§Ù„ØµØºÙŠØ±Ø© Ø§Ù„ØªÙŠ ØªØ­Ø¯Ø« Ù„ÙŠ.',
      'Ø£Ø³ØªØ·ÙŠØ¹ Ù…Ø´Ø§Ø±ÙƒØ© Ù…Ø´Ø§Ø¹Ø±ÙŠ Ù…Ø¹ Ø£ØµØ¯Ù‚Ø§Ø¦ÙŠ Ø£Ùˆ Ø£Ø³Ø±ØªÙŠ.',
      'Ø£Ø­Ø³ Ø¨ØªØ­Ø³Ù† Ø¹Ù†Ø¯Ù…Ø§ Ø£Ø±Ø³Ù… Ø£Ùˆ Ø£Ø³ØªÙ…Ø¹ Ù„Ù„Ø£ØºØ§Ù†ÙŠ.',
      'Ø£Ø¬Ø¯ ØµØ¹ÙˆØ¨Ø© ÙÙŠ Ø§Ù„Ù†ÙˆÙ… Ø¨Ø³Ø¨Ø¨ Ø§Ù„ØªÙÙƒÙŠØ± Ø¨Ù…Ø§ ÙŠØ³Ø¨Ø¨ Ù„ÙŠ Ø§Ù„Ù‚Ù„Ù‚.',
      'Ø£Ø´Ø¹Ø± Ø¨Ø§Ù„Ø³Ø¹Ø§Ø¯Ø© Ø¹Ù†Ø¯ Ø¥Ù†Ø¬Ø§Ø² Ù…Ù‡Ù…Ø© Ø¬Ø¯ÙŠØ¯Ø©.',
      'Ø£Ø­Ø³ Ø¨Ø§Ù„ØªÙˆØªØ± Ø¹Ù†Ø¯Ù…Ø§ Ù„Ø§ Ø£Ø³ØªØ·ÙŠØ¹ Ù‚ÙˆÙ„ Ø±Ø£ÙŠÙŠ.',
      'Ø£Ù‚Ø¨Ù„ Ø§Ù„ØªØ­Ø¯ÙŠØ§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ø¯ÙˆÙ† Ø®ÙˆÙ ÙƒØ¨ÙŠØ±.',
      'Ø£Ø´Ø¹Ø± Ø¨Ø§Ù„ÙØ®Ø± Ø¹Ù†Ø¯Ù…Ø§ ÙŠØ«Ù†ÙŠ Ø§Ù„Ù†Ø§Ø³ Ø¹Ù„Ù‰ Ù…Ø§ Ø£ÙØ¹Ù„Ù‡.'
    ];
    const emojiOptions = [
      { emoji: 'ğŸ˜Š', value: 3 },
      { emoji: 'ğŸ˜', value: 2 },
      { emoji: 'â˜¹ï¸', value: 1 }
    ];
    const suggestions = ['ØªÙ…Ø§Ø±ÙŠÙ† Ø§Ù„ØªÙ†ÙØ³','Ù†Ø´Ø§Ø·Ø§Øª Ø§Ù„Ø±Ø³Ù… ÙˆØ§Ù„ØªÙ„ÙˆÙŠÙ†','Ø¬Ù„Ø³Ø§Øª Ø­ÙˆØ§Ø± Ø¨Ù†Ø§Ø¡'];

    let currentIndex = 0;
    const answers = new Array(questions.length);

    const quizDiv = document.getElementById('quiz-container');
    const imgElem = document.getElementById('question-img');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');

    function renderQuestion() {
      imgElem.src = `assets/images/emotional/q${currentIndex+1}.jpg`;
      imgElem.alt = `ØµÙˆØ±Ø© Ø§Ù„Ø³Ø¤Ø§Ù„ ${currentIndex+1}`;

      quizDiv.innerHTML = '';
      const card = document.createElement('div');
      card.className = 'card';

      const q = document.createElement('p');
      q.textContent = `Ø§Ù„Ø³Ø¤Ø§Ù„ ${currentIndex+1} Ù…Ù† ${questions.length}: ${questions[currentIndex]}`;
      card.appendChild(q);

      const optsDiv = document.createElement('div');
      optsDiv.className = 'emoji-options';
      emojiOptions.forEach(opt => {
        const btn = document.createElement('button');
        btn.className = 'emoji-btn';
        btn.textContent = opt.emoji;
        if (answers[currentIndex] === opt.value) btn.classList.add('selected');
        btn.onclick = () => {
          answers[currentIndex] = opt.value;
          renderQuestion();
        };
        optsDiv.appendChild(btn);
      });
      card.appendChild(optsDiv);

      const legend = document.createElement('div');
      legend.className = 'legend';
      legend.textContent = 'ğŸ˜Š = ØµØ­ÙŠØ­ ØªÙ…Ø§Ù…Ø§Ù‹ | ğŸ˜ = ØµØ­ÙŠØ­ Ø¥Ù„Ù‰ Ø­Ø¯ Ù…Ø§ | â˜¹ï¸ = ØºÙŠØ± ØµØ­ÙŠØ­ Ø£Ø¨Ø¯Ø§Ù‹';
      card.appendChild(legend);

      quizDiv.appendChild(card);

      prevBtn.disabled = currentIndex === 0;
      nextBtn.textContent = currentIndex < questions.length - 1 ? 'Ø§Ù„ØªØ§Ù„ÙŠ' : 'Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªÙŠØ¬Ø©';
      nextBtn.disabled = answers[currentIndex] == null;
    }

    prevBtn.onclick = () => {
      if (currentIndex > 0) {
        currentIndex--;
        renderQuestion();
      }
    };

    nextBtn.onclick = () => {
      if (currentIndex < questions.length - 1) {
        currentIndex++;
        renderQuestion();
      } else {
        showResult();
      }
    };

    function showResult() {
      const sum = answers.reduce((a, b) => a + b, 0);
      quizDiv.innerHTML = '';
      document.querySelector('.nav').style.display = 'none';

      const res = document.createElement('div');
      res.className = 'result-card';

      const title = document.createElement('h2');
      title.textContent = `Ù†Ù‚Ø§Ø· Ø§Ù„Ù‚ÙˆØ©: ${sum} Ù…Ù† ${questions.length * 3}`;
      res.appendChild(title);

      const status = sum <= 15 ? 'Ø¨Ø­Ø§Ø¬Ø© Ø¥Ù„Ù‰ Ø¯Ø¹Ù…' : sum <= 30 ? 'Ù…ØªÙˆØ³Ø·' : 'Ù‚ÙˆØ© Ø¹Ø§Ù„ÙŠØ©';
      const interp = document.createElement('p');
      interp.textContent = `Ø§Ù„ØªÙ‚ÙŠÙŠÙ…: ${status}`;
      res.appendChild(interp);

      if (sum <= 30) {
        const tipsHeader = document.createElement('h3');
        tipsHeader.textContent = 'Ù†ØµØ§Ø¦Ø­:';
        res.appendChild(tipsHeader);

        const ul = document.createElement('ul');
        ul.className = 'solutions';
        suggestions.forEach(s => {
          const li = document.createElement('li');
          li.textContent = s;
          ul.appendChild(li);
        });
        res.appendChild(ul);
      }

      quizDiv.appendChild(res);
    }

    // Ø¨Ø¯Ø§ÙŠØ© ÙÙˆØ± Ø§Ù„ØªØ­Ù…ÙŠÙ„
    renderQuestion();
  </script>

</body>
</html>
